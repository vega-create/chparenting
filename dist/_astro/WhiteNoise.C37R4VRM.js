import{j as n}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.DiEladB3.js";const x=[{id:"rain",name:"é›¨è²",emoji:"ğŸŒ§ï¸",color:"#8BA888",desc:"æº«æŸ”çš„é›¨æ»´è²"},{id:"ocean",name:"æµ·æµª",emoji:"ğŸŒŠ",color:"#A0B8C4",desc:"è¼•æŸ”çš„æµ·æµªæ‹æ‰“"},{id:"forest",name:"æ£®æ—",emoji:"ğŸŒ²",color:"#6E8E6A",desc:"é³¥é³´èˆ‡å¾®é¢¨"},{id:"fire",name:"ç¯ç«",emoji:"ğŸ”¥",color:"#D4956A",desc:"æº«æš–çš„æŸ´ç«è²"},{id:"wind",name:"å¾®é¢¨",emoji:"ğŸƒ",color:"#B8C4A0",desc:"è¼•è¼•å¹éçš„é¢¨"},{id:"night",name:"å¤œæ™š",emoji:"ğŸŒ™",color:"#9A8A9A",desc:"èŸ²é³´è›™å«"}],j=[{label:"ä¸é™",minutes:0},{label:"5 åˆ†é˜",minutes:5},{label:"15 åˆ†é˜",minutes:15},{label:"30 åˆ†é˜",minutes:30},{label:"60 åˆ†é˜",minutes:60}];function b(r){try{const o=new(window.AudioContext||window.webkitAudioContext),u=o.createGain();u.connect(o.destination),u.gain.value=.3;const f=2*o.sampleRate,c=o.createBuffer(1,f,o.sampleRate),s=c.getChannelData(0);for(let t=0;t<f;t++)switch(r){case"rain":s[t]=(Math.random()*2-1)*(Math.random()>.97?.8:.15);break;case"ocean":s[t]=Math.sin(t/800)*.3+(Math.random()*2-1)*.1;break;case"forest":s[t]=(Math.random()*2-1)*.08+Math.sin(t/2e3)*.05;break;case"fire":s[t]=(Math.random()*2-1)*(.15+Math.random()*.15);break;case"wind":s[t]=Math.sin(t/1200)*.15+(Math.random()*2-1)*.06;break;case"night":s[t]=(Math.random()*2-1)*.05+(Math.random()>.995?Math.sin(t/50)*.3:0);break;default:s[t]=(Math.random()*2-1)*.15}const l=o.createBiquadFilter();l.type="lowpass",l.frequency.value=r==="wind"?400:r==="ocean"?600:800,l.connect(u);let a=null;return{start:()=>{a=o.createBufferSource(),a.buffer=c,a.loop=!0,a.connect(l),a.start()},stop:()=>{a?.stop(),o.close()},setVolume:t=>{u.gain.value=t}}}catch{return null}}function E(){const[r,o]=d.useState(null),[u,f]=d.useState(.3),[c,s]=d.useState(0),[l,a]=d.useState(0),t=d.useRef(null),i=d.useRef(null);d.useEffect(()=>()=>{t.current?.stop(),i.current&&clearInterval(i.current)},[]),d.useEffect(()=>{l<=0&&i.current&&(clearInterval(i.current),i.current=null,r&&p())},[l]);const g=e=>{t.current?.stop(),i.current&&clearInterval(i.current);const m=b(e);m&&(m.setVolume(u),m.start(),t.current=m,o(e),c>0&&(a(c*60),i.current=setInterval(()=>{a(h=>h-1)},1e3)))},p=()=>{t.current?.stop(),t.current=null,o(null),a(0),i.current&&(clearInterval(i.current),i.current=null)},A=e=>{f(e),t.current?.setVolume(e)},y=e=>{const m=Math.floor(e/60),h=e%60;return`${m}:${h.toString().padStart(2,"0")}`};return n.jsxs("div",{style:{padding:"2rem",fontFamily:"Noto Sans TC, sans-serif"},children:[n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:24,maxWidth:400,margin:"0 auto 24px"},children:x.map(e=>n.jsxs("button",{onClick:()=>r===e.id?p():g(e.id),style:{padding:"16px 8px",borderRadius:16,border:r===e.id?`2px solid ${e.color}`:"2px solid #EDE5DB",background:r===e.id?`${e.color}15`:"white",cursor:"pointer",transition:"all 0.3s",textAlign:"center"},children:[n.jsx("span",{style:{fontSize:28,display:"block",marginBottom:4},children:e.emoji}),n.jsx("span",{style:{fontSize:13,fontWeight:600,color:r===e.id?e.color:"#5A4E42",display:"block"},children:e.name}),n.jsx("span",{style:{fontSize:11,color:"#9A8A7A"},children:e.desc})]},e.id))}),n.jsxs("div",{style:{maxWidth:400,margin:"0 auto 20px",display:"flex",alignItems:"center",gap:12},children:[n.jsx("span",{style:{fontSize:14},children:"ğŸ”ˆ"}),n.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:u,onChange:e=>A(parseFloat(e.target.value)),style:{flex:1,accentColor:"#E8A87C"}}),n.jsx("span",{style:{fontSize:14},children:"ğŸ”Š"})]}),n.jsxs("div",{style:{maxWidth:400,margin:"0 auto 20px"},children:[n.jsx("p",{style:{fontSize:13,color:"#9A8A7A",marginBottom:8,textAlign:"center"},children:"â° å®šæ™‚é—œé–‰"}),n.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:j.map(e=>n.jsx("button",{onClick:()=>s(e.minutes),style:{padding:"6px 14px",borderRadius:12,border:c===e.minutes?"2px solid #E8A87C":"2px solid #EDE5DB",background:c===e.minutes?"#E8A87C10":"white",color:c===e.minutes?"#E8A87C":"#5A4E42",fontSize:13,fontWeight:500,cursor:"pointer",fontFamily:"Noto Sans TC, sans-serif"},children:e.label},e.minutes))})]}),n.jsx("div",{style:{textAlign:"center",marginTop:20},children:r?n.jsxs(n.Fragment,{children:[n.jsxs("p",{style:{fontSize:14,color:"#5A4E42"},children:["æ­£åœ¨æ’­æ”¾ï¼š",x.find(e=>e.id===r)?.emoji," ",x.find(e=>e.id===r)?.name]}),l>0&&n.jsxs("p",{style:{fontSize:13,color:"#9A8A7A",marginTop:4},children:["å‰©é¤˜ ",y(l)]}),n.jsx("button",{onClick:p,style:{marginTop:12,padding:"10px 24px",borderRadius:999,border:"none",background:"#9A8A7A",color:"white",cursor:"pointer",fontSize:14,fontWeight:600,fontFamily:"Quicksand, Noto Sans TC, sans-serif"},children:"â¸ åœæ­¢"})]}):n.jsx("p",{style:{fontSize:14,color:"#9A8A7A"},children:"é¸æ“‡ä¸€å€‹éŸ³æ•ˆé–‹å§‹æ”¾é¬† â™¡"})})]})}export{E as default};
